import{s as X,r as Z,c as $,o as x}from"../chunks/scheduler.TjET1Dad.js";import{S as ee,i as te,t as O,s as N,e as b,k as oe,l as K,b as j,f as k,c as y,a as M,m as ae,d as i,n as se,g as c,h,o as I,p as ne,q as Q,j as q,r as le,v as re,w as ie}from"../chunks/index.CogmN7-S.js";import{p as ue}from"../chunks/stores.kjepElkH.js";import{B as pe}from"../chunks/Button.BYWkm6PB.js";import"../chunks/Theme.svelte_svelte_type_style_lang.BfHm16wz.js";function fe(r){let s;return{c(){s=O("Actualizar")},l(o){s=j(o,"Actualizar")},m(o,n){c(o,s,n)},d(o){o&&i(s)}}}function V(r){let s,o,n;return{c(){s=b("hr"),o=N(),n=O(r[2])},l(t){s=y(t,"HR",{}),o=k(t),n=j(t,r[2])},m(t,a){c(t,s,a),c(t,o,a),c(t,n,a)},p(t,a){a&4&&q(n,t[2])},d(t){t&&(i(s),i(o),i(n))}}}function W(r){let s,o,n;return{c(){s=b("hr"),o=O(`
ERROR: `),n=O(r[1])},l(t){s=y(t,"HR",{}),o=j(t,`
ERROR: `),n=j(t,r[1])},m(t,a){c(t,s,a),c(t,o,a),c(t,n,a)},p(t,a){a&2&&q(n,t[1])},d(t){t&&(i(s),i(o),i(n))}}}function ce(r){let s,o=r[0].name+"",n,t,a,_,T="<tr><th>Nombre</th> <th>País</th></tr>",w,g,d,D,m,u,P,R,L,B,E,C,v,H,S,U,J;E=new pe({props:{color:"primary",$$slots:{default:[fe]},$$scope:{ctx:r}}}),E.$on("click",r[3]);let p=r[2]!=""&&V(r),f=r[1]!=""&&W(r);return{c(){s=O("Details of "),n=O(o),t=N(),a=b("table"),_=b("thead"),_.innerHTML=T,w=N(),g=b("tbody"),d=b("tr"),D=b("td"),m=b("input"),u=N(),P=b("td"),R=b("input"),L=N(),B=b("td"),oe(E.$$.fragment),C=N(),p&&p.c(),v=N(),f&&f.c(),H=K()},l(e){s=j(e,"Details of "),n=j(e,o),t=k(e),a=y(e,"TABLE",{});var l=M(a);_=y(l,"THEAD",{"data-svelte-h":!0}),ae(_)!=="svelte-1pommon"&&(_.innerHTML=T),w=k(l),g=y(l,"TBODY",{});var z=M(g);d=y(z,"TR",{});var A=M(d);D=y(A,"TD",{});var G=M(D);m=y(G,"INPUT",{}),G.forEach(i),u=k(A),P=y(A,"TD",{});var Y=M(P);R=y(Y,"INPUT",{}),Y.forEach(i),L=k(A),B=y(A,"TD",{});var F=M(B);se(E.$$.fragment,F),F.forEach(i),A.forEach(i),z.forEach(i),l.forEach(i),C=k(e),p&&p.l(e),v=k(e),f&&f.l(e),H=K()},m(e,l){c(e,s,l),c(e,n,l),c(e,t,l),c(e,a,l),h(a,_),h(a,w),h(a,g),h(g,d),h(d,D),h(D,m),I(m,r[0].name),h(d,u),h(d,P),h(P,R),I(R,r[0].country),h(d,L),h(d,B),ne(E,B,null),c(e,C,l),p&&p.m(e,l),c(e,v,l),f&&f.m(e,l),c(e,H,l),S=!0,U||(J=[Q(m,"input",r[4]),Q(R,"input",r[5])],U=!0)},p(e,[l]){(!S||l&1)&&o!==(o=e[0].name+"")&&q(n,o),l&1&&m.value!==e[0].name&&I(m,e[0].name),l&1&&R.value!==e[0].country&&I(R,e[0].country);const z={};l&512&&(z.$$scope={dirty:l,ctx:e}),E.$set(z),e[2]!=""?p?p.p(e,l):(p=V(e),p.c(),p.m(v.parentNode,v)):p&&(p.d(1),p=null),e[1]!=""?f?f.p(e,l):(f=W(e),f.c(),f.m(H.parentNode,H)):f&&(f.d(1),f=null)},i(e){S||(le(E.$$.fragment,e),S=!0)},o(e){re(E.$$.fragment,e),S=!1},d(e){e&&(i(s),i(n),i(t),i(a),i(C),i(v),i(H)),ie(E),p&&p.d(e),f&&f.d(e),U=!1,Z(J)}}}function me(r,s,o){let n;$(r,ue,m=>o(6,n=m));let t=n.params;const a=`http://localhost:10000/famous-people/${t.name}/${t.country}`;let _="",T="";x(()=>{w()});async function w(){const m=await fetch(a,{method:"GET"});try{const u=await res.json();console.log(u),result=JSON.stringify(u,null,2),updated_name=u.name,updated_short_description=u.short_description,updated_gender=u.gender,updated_country=u.country,updated_occupation=u.occupation,updated_birth_year=u.birth_year,updated_death_year=u.death_year,updated_age_of_death=u.age_of_death}catch{console.log("Error parsing result")}m.status==404?(o(2,T="No existe la persona"),setTimeout(()=>{o(2,T="")},3e3)):m.status==400&&(o(2,T="Ha habido un error en la petición"),setTimeout(()=>{o(2,T="")},3e3))}async function g(){const u=await(await fetch(`http://localhost:10000/famous-people/${t.name}`)).json();try{(await fetch(a,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(u)})).status==200?(o(2,T="Persona actualizada con éxito"),w(),setTimeout(()=>{o(2,T="")},3e3)):(o(1,_="Esa persona no existe"),setTimeout(()=>{o(1,_="")},3e3))}catch(P){o(1,_=P)}}function d(){t.name=this.value,o(0,t)}function D(){t.country=this.value,o(0,t)}return[t,_,T,g,d,D]}class Te extends ee{constructor(s){super(),te(this,s,me,ce,X,{})}}export{Te as component};
