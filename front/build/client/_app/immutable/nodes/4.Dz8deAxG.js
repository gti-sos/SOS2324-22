import{s as je,r as Oe,o as Ye,i as qe}from"../chunks/scheduler.Dc1jLLu_.js";import{S as ze,i as Ge,e as l,h as D,j as fe,b as u,f as b,k as Ne,l as w,d as f,m as ce,x as L,z as Ce,a as Y,g as r,n as y,o as he,p as V,q as Q,r as Re,u as X,v as _e,w as Fe,t as Z,c as x,s as Ue,y as Je}from"../chunks/index.USbQfvAI.js";import{e as ke}from"../chunks/each.D6YF6ztN.js";import{B as ve,M as Ve}from"../chunks/MessageContainer.zl6tcV2J.js";import"../chunks/Theme.svelte_svelte_type_style_lang.NJlEhCd8.js";function Ae(s,n,e){const c=s.slice();return c[17]=n[e],c}function $e(s){let n;return{c(){n=Z("Crear")},l(e){n=x(e,"Crear")},m(e,c){Y(e,n,c)},d(e){e&&f(n)}}}function Ke(s){let n;return{c(){n=Z("Borrar")},l(e){n=x(e,"Borrar")},m(e,c){Y(e,n,c)},d(e){e&&f(n)}}}function He(s){let n,e,c,v=s[17].name+"",i,p,a,g=s[17].gender+"",U,N,m,M;return m=new ve({props:{class:"delete-button",color:"danger",$$slots:{default:[Ke]},$$scope:{ctx:s}}}),m.$on("click",function(){qe(s[4](s[17].name))&&s[4](s[17].name).apply(this,arguments)}),{c(){n=l("div"),e=l("li"),c=l("a"),i=Z(v),a=Z("- "),U=Z(g),N=D(),fe(m.$$.fragment),this.h()},l(d){n=u(d,"DIV",{class:!0});var _=b(n);e=u(_,"LI",{class:!0});var B=b(e);c=u(B,"A",{href:!0});var k=b(c);i=x(k,v),k.forEach(f),a=x(B,"- "),U=x(B,g),B.forEach(f),N=w(_),ce(m.$$.fragment,_),_.forEach(f),this.h()},h(){L(c,"href",p="/famous-people/"+s[17].name+"/"+s[17].country),L(e,"class","svelte-1316pci"),L(n,"class","person-container svelte-1316pci")},m(d,_){Y(d,n,_),r(n,e),r(e,c),r(c,i),r(e,a),r(e,U),r(n,N),he(m,n,null),M=!0},p(d,_){s=d,(!M||_&1)&&v!==(v=s[17].name+"")&&Ue(i,v),(!M||_&1&&p!==(p="/famous-people/"+s[17].name+"/"+s[17].country))&&L(c,"href",p),(!M||_&1)&&g!==(g=s[17].gender+"")&&Ue(U,g);const B={};_&1048576&&(B.$$scope={dirty:_,ctx:s}),m.$set(B)},i(d){M||(Q(m.$$.fragment,d),M=!0)},o(d){X(m.$$.fragment,d),M=!1},d(d){d&&f(n),_e(m)}}}function Qe(s){let n;return{c(){n=Z("Borrar todo")},l(e){n=x(e,"Borrar todo")},m(e,c){Y(e,n,c)},d(e){e&&f(n)}}}function We(s){let n,e,c="<tr><th>Nombre</th> <th>Breve descripción</th> <th>Género</th> <th>País</th></tr>",v,i,p,a,g,U,N,m,M,d,_,B,k,A,ee,q,T="<tr><th>Profesión</th> <th>Año de nacimiento</th> <th>Año de fallecimiento</th> <th>Edad de muerte</th></tr>",I,P,te,z,me,se,G,de,ne,R,ge,oe,F,Te,re,j,le,$,ue,O,ie,J,pe,Ee,ye;j=new ve({props:{color:"primary",$$slots:{default:[$e]},$$scope:{ctx:s}}}),j.$on("click",s[6]);let K=ke(s[0]),h=[];for(let t=0;t<K.length;t+=1)h[t]=He(Ae(s,K,t));const Se=t=>X(h[t],1,1,()=>{h[t]=null});return O=new ve({props:{color:"danger",$$slots:{default:[Qe]},$$scope:{ctx:s}}}),O.$on("click",s[5]),J=new Ve({props:{Msg:s[2],errorMsg:s[1]}}),{c(){n=l("table"),e=l("thead"),e.innerHTML=c,v=D(),i=l("tbody"),p=l("tr"),a=l("td"),g=l("input"),U=D(),N=l("td"),m=l("input"),M=D(),d=l("td"),_=l("input"),B=D(),k=l("td"),A=l("input"),ee=D(),q=l("thead"),q.innerHTML=T,I=D(),P=l("tbody"),te=l("td"),z=l("input"),me=D(),se=l("td"),G=l("input"),de=D(),ne=l("td"),R=l("input"),ge=D(),oe=l("td"),F=l("input"),Te=D(),re=l("td"),fe(j.$$.fragment),le=D(),$=l("ul");for(let t=0;t<h.length;t+=1)h[t].c();ue=D(),fe(O.$$.fragment),ie=D(),fe(J.$$.fragment),this.h()},l(t){n=u(t,"TABLE",{});var o=b(n);e=u(o,"THEAD",{"data-svelte-h":!0}),Ne(e)!=="svelte-yas1z9"&&(e.innerHTML=c),v=w(o),i=u(o,"TBODY",{});var H=b(i);p=u(H,"TR",{});var C=b(p);a=u(C,"TD",{});var W=b(a);g=u(W,"INPUT",{class:!0}),W.forEach(f),U=w(C),N=u(C,"TD",{});var E=b(N);m=u(E,"INPUT",{class:!0}),E.forEach(f),M=w(C),d=u(C,"TD",{});var ae=b(d);_=u(ae,"INPUT",{class:!0}),ae.forEach(f),B=w(C),k=u(C,"TD",{});var Pe=b(k);A=u(Pe,"INPUT",{class:!0}),Pe.forEach(f),C.forEach(f),H.forEach(f),ee=w(o),q=u(o,"THEAD",{"data-svelte-h":!0}),Ne(q)!=="svelte-1w7yoi0"&&(q.innerHTML=T),I=w(o),P=u(o,"TBODY",{});var S=b(P);te=u(S,"TD",{});var De=b(te);z=u(De,"INPUT",{class:!0}),De.forEach(f),me=w(S),se=u(S,"TD",{});var we=b(se);G=u(we,"INPUT",{class:!0}),we.forEach(f),de=w(S),ne=u(S,"TD",{});var Me=b(ne);R=u(Me,"INPUT",{class:!0}),Me.forEach(f),ge=w(S),oe=u(S,"TD",{});var Be=b(oe);F=u(Be,"INPUT",{class:!0}),Be.forEach(f),Te=w(S),re=u(S,"TD",{});var Ie=b(re);ce(j.$$.fragment,Ie),Ie.forEach(f),S.forEach(f),o.forEach(f),le=w(t),$=u(t,"UL",{});var Le=b($);for(let be=0;be<h.length;be+=1)h[be].l(Le);Le.forEach(f),ue=w(t),ce(O.$$.fragment,t),ie=w(t),ce(J.$$.fragment,t),this.h()},h(){L(g,"class","svelte-1316pci"),L(m,"class","svelte-1316pci"),Ce(m,"width",s[3].short_description.length*8+"px"),L(_,"class","svelte-1316pci"),L(A,"class","svelte-1316pci"),L(z,"class","svelte-1316pci"),L(G,"class","svelte-1316pci"),L(R,"class","svelte-1316pci"),L(F,"class","svelte-1316pci")},m(t,o){Y(t,n,o),r(n,e),r(n,v),r(n,i),r(i,p),r(p,a),r(a,g),y(g,s[3].name),r(p,U),r(p,N),r(N,m),y(m,s[3].short_description),r(p,M),r(p,d),r(d,_),y(_,s[3].gender),r(p,B),r(p,k),r(k,A),y(A,s[3].country),r(n,ee),r(n,q),r(n,I),r(n,P),r(P,te),r(te,z),y(z,s[3].occupation),r(P,me),r(P,se),r(se,G),y(G,s[3].birth_year),r(P,de),r(P,ne),r(ne,R),y(R,s[3].death_year),r(P,ge),r(P,oe),r(oe,F),y(F,s[3].age_of_death),r(P,Te),r(P,re),he(j,re,null),Y(t,le,o),Y(t,$,o);for(let H=0;H<h.length;H+=1)h[H]&&h[H].m($,null);Y(t,ue,o),he(O,t,o),Y(t,ie,o),he(J,t,o),pe=!0,Ee||(ye=[V(g,"input",s[8]),V(m,"input",s[9]),V(_,"input",s[10]),V(A,"input",s[11]),V(z,"input",s[12]),V(G,"input",s[13]),V(R,"input",s[14]),V(F,"input",s[15])],Ee=!0)},p(t,[o]){o&8&&g.value!==t[3].name&&y(g,t[3].name),o&8&&m.value!==t[3].short_description&&y(m,t[3].short_description),o&8&&Ce(m,"width",t[3].short_description.length*8+"px"),o&8&&_.value!==t[3].gender&&y(_,t[3].gender),o&8&&A.value!==t[3].country&&y(A,t[3].country),o&8&&z.value!==t[3].occupation&&y(z,t[3].occupation),o&8&&G.value!==t[3].birth_year&&y(G,t[3].birth_year),o&8&&R.value!==t[3].death_year&&y(R,t[3].death_year),o&8&&F.value!==t[3].age_of_death&&y(F,t[3].age_of_death);const H={};if(o&1048576&&(H.$$scope={dirty:o,ctx:t}),j.$set(H),o&17){K=ke(t[0]);let E;for(E=0;E<K.length;E+=1){const ae=Ae(t,K,E);h[E]?(h[E].p(ae,o),Q(h[E],1)):(h[E]=He(ae),h[E].c(),Q(h[E],1),h[E].m($,null))}for(Je(),E=K.length;E<h.length;E+=1)Se(E);Re()}const C={};o&1048576&&(C.$$scope={dirty:o,ctx:t}),O.$set(C);const W={};o&4&&(W.Msg=t[2]),o&2&&(W.errorMsg=t[1]),J.$set(W)},i(t){if(!pe){Q(j.$$.fragment,t);for(let o=0;o<K.length;o+=1)Q(h[o]);Q(O.$$.fragment,t),Q(J.$$.fragment,t),pe=!0}},o(t){X(j.$$.fragment,t),h=h.filter(Boolean);for(let o=0;o<h.length;o+=1)X(h[o]);X(O.$$.fragment,t),X(J.$$.fragment,t),pe=!1},d(t){t&&(f(n),f(le),f($),f(ue),f(ie)),_e(j),Fe(h,t),_e(O,t),_e(J,t),Ee=!1,Oe(ye)}}}function Xe(s,n,e){let c="/api/v2/famous-people",v=[],i="",p="";const a={name:"Mariano Rajoy",short_description:" president of Spain",gender:"Male",country:"Spain",occupation:"Politician",birth_year:1950,death_year:2039,age_of_death:89};Ye(()=>{g()});async function g(){try{let T=await fetch(c,{method:"GET"}),I=await T.json();e(0,v=I),T.status===200||(v.length===0?(e(2,p="La lista esta vacía"),setTimeout(()=>{e(2,p="")},3e3)):T.status===400?(e(1,i="Formato incorrecto"),setTimeout(()=>{e(1,i="")},3e3)):(e(1,i="Error cargando personas"),setTimeout(()=>{e(1,i="")},3e3)))}catch(T){e(1,i=T)}}async function U(T){try{let I=await fetch(c+"/"+T,{method:"DELETE"});console.log(`Deleting person with name ${T}`),I.status===200?(e(2,p="Persona borrada con éxito"),e(0,v=v.filter(P=>P.name!==T)),setTimeout(()=>{e(2,p="")},3e3)):(e(1,i="Esa persona no existe"),setTimeout(()=>{e(1,i="")},3e3))}catch(I){e(1,i=I)}}async function N(){try{(await fetch(c,{method:"DELETE"})).status==200?(e(2,p="Personas borradas con éxito"),e(0,v=[]),setTimeout(()=>{e(2,p="")},3e3)):(e(1,i="Ya están todas las personas borradas"),setTimeout(()=>{e(1,i="")},3e3))}catch(T){e(1,i=T)}}async function m(){try{let I=await(await fetch(c,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)})).status;console.log(`Creation response status ${I}`),I===201?(g(),e(2,p="Persona creada con éxito"),setTimeout(()=>{e(2,p="")},3e3)):(e(1,i="La persona ya existe"),setTimeout(()=>{e(1,i="")},3e3))}catch(T){e(1,i=T)}}function M(){a.name=this.value,e(3,a)}function d(){a.short_description=this.value,e(3,a)}function _(){a.gender=this.value,e(3,a)}function B(){a.country=this.value,e(3,a)}function k(){a.occupation=this.value,e(3,a)}function A(){a.birth_year=this.value,e(3,a)}function ee(){a.death_year=this.value,e(3,a)}function q(){a.age_of_death=this.value,e(3,a)}return[v,i,p,a,U,N,m,g,M,d,_,B,k,A,ee,q]}class nt extends ze{constructor(n){super(),Ge(this,n,Xe,We,je,{getPeople:7})}get getPeople(){return this.$$.ctx[7]}}export{nt as component};
