import{s as vt,r as Tt,o as Pt,i as bt}from"../chunks/scheduler.wWR6jiGY.js";import{S as Et,i as yt,e as r,h as _,j as he,t as V,b as l,f as E,k as st,l as m,d as u,m as _e,c as Y,x as h,z as ht,a as U,g as a,n as c,o as me,p as B,q as K,r as wt,s as ot,u as x,v as de,w as $t,y as Dt}from"../chunks/index.BrUfcjbG.js";import{e as _t}from"../chunks/each.D6YF6ztN.js";import{B as ye}from"../chunks/MessageContainer.svelte_svelte_type_style_lang.BTm8g4uz.js";import"../chunks/Theme.svelte_svelte_type_style_lang.C8eeSRjy.js";import{M as It}from"../chunks/MessageContainer.BhMVhnr4.js";function mt(n,o,t){const f=n.slice();return f[31]=o[t],f}function Nt(n){let o;return{c(){o=V("Buscar")},l(t){o=Y(t,"Buscar")},m(t,f){U(t,o,f)},d(t){t&&u(o)}}}function Ut(n){let o;return{c(){o=V("Crear")},l(t){o=Y(t,"Crear")},m(t,f){U(t,o,f)},d(t){t&&u(o)}}}function Mt(n){let o;return{c(){o=V("Borrar")},l(t){o=Y(t,"Borrar")},m(t,f){U(t,o,f)},d(t){t&&u(o)}}}function dt(n){let o,t,f,y=n[31].name+"",p,$,D,k=n[31].gender+"",i,d,g,L;return g=new ye({props:{class:"delete-button",color:"danger",$$slots:{default:[Mt]},$$scope:{ctx:n}}}),g.$on("click",function(){bt(n[6](n[31].name))&&n[6](n[31].name).apply(this,arguments)}),{c(){o=r("div"),t=r("li"),f=r("a"),p=V(y),D=V("- "),i=V(k),d=_(),he(g.$$.fragment),this.h()},l(T){o=l(T,"DIV",{class:!0});var I=E(o);t=l(I,"LI",{class:!0});var w=E(t);f=l(w,"A",{href:!0});var ee=E(f);p=Y(ee,y),ee.forEach(u),D=Y(w,"- "),i=Y(w,k),w.forEach(u),d=m(I),_e(g.$$.fragment,I),I.forEach(u),this.h()},h(){h(f,"href",$="/famous-people/"+n[31].name+"/"+n[31].country),h(t,"class","svelte-1316pci"),h(o,"class","person-container svelte-1316pci")},m(T,I){U(T,o,I),a(o,t),a(t,f),a(f,p),a(t,D),a(t,i),a(o,d),me(g,o,null),L=!0},p(T,I){n=T,(!L||I[0]&1)&&y!==(y=n[31].name+"")&&ot(p,y),(!L||I[0]&1&&$!==($="/famous-people/"+n[31].name+"/"+n[31].country))&&h(f,"href",$),(!L||I[0]&1)&&k!==(k=n[31].gender+"")&&ot(i,k);const w={};I[1]&8&&(w.$$scope={dirty:I,ctx:n}),g.$set(w)},i(T){L||(K(g.$$.fragment,T),L=!0)},o(T){x(g.$$.fragment,T),L=!1},d(T){T&&u(o),de(g)}}}function Bt(n){let o;return{c(){o=V("Borrar todo")},l(t){o=Y(t,"Borrar todo")},m(t,f){U(t,o,f)},d(t){t&&u(o)}}}function kt(n){let o;return{c(){o=V("Página anterior")},l(t){o=Y(t,"Página anterior")},m(t,f){U(t,o,f)},d(t){t&&u(o)}}}function Ct(n){let o;return{c(){o=V("Página siguiente")},l(t){o=Y(t,"Página siguiente")},m(t,f){U(t,o,f)},d(t){t&&u(o)}}}function Lt(n){let o,t,f="Buscar por campos",y,p,$,D,k,i,d,g,L,T,I,w,ee,z,we,G,ge,O,ve,C,te,He="<tr><th>Nombre</th> <th>Breve descripción</th> <th>Género</th> <th>País</th></tr>",$e,ue,A,ie,F,De,pe,j,P,b,q,Ve,Ie,ne,Ye,Te,at="<tr><th>Profesión</th> <th>Año de nacimiento</th> <th>Año de fallecimiento</th> <th>Edad de muerte</th></tr>",Fe,S,Ne,se,Je,Ue,oe,Ke,Me,ae,Qe,Be,re,We,ke,Q,je,ce,qe,W,ze,J,X,Xe,Pe,Ze,Ge,xe,Z,Oe,le,Ce,et,rt;O=new ye({props:{color:"primary",$$slots:{default:[Nt]},$$scope:{ctx:n}}}),O.$on("click",n[9]),Q=new ye({props:{color:"primary",$$slots:{default:[Ut]},$$scope:{ctx:n}}}),Q.$on("click",n[8]);let fe=_t(n[0]),v=[];for(let e=0;e<fe.length;e+=1)v[e]=dt(mt(n,fe,e));const gt=e=>x(v[e],1,1,()=>{v[e]=null});return W=new ye({props:{color:"danger",$$slots:{default:[Bt]},$$scope:{ctx:n}}}),W.$on("click",n[7]),X=new ye({props:{color:"primary",$$slots:{default:[kt]},$$scope:{ctx:n}}}),X.$on("click",n[11]),Z=new ye({props:{color:"primary",$$slots:{default:[Ct]},$$scope:{ctx:n}}}),Z.$on("click",n[10]),le=new It({props:{Msg:n[2],errorMsg:n[1]}}),{c(){o=r("div"),t=r("h2"),t.textContent=f,y=_(),p=r("input"),$=_(),D=r("input"),k=_(),i=r("input"),d=_(),g=r("input"),L=_(),T=r("input"),I=_(),w=r("input"),ee=_(),z=r("input"),we=_(),G=r("input"),ge=_(),he(O.$$.fragment),ve=_(),C=r("table"),te=r("thead"),te.innerHTML=He,$e=_(),ue=r("tbody"),A=r("tr"),ie=r("td"),F=r("input"),De=_(),pe=r("td"),j=r("input"),P=_(),b=r("td"),q=r("input"),Ve=_(),Ie=r("td"),ne=r("input"),Ye=_(),Te=r("thead"),Te.innerHTML=at,Fe=_(),S=r("tbody"),Ne=r("td"),se=r("input"),Je=_(),Ue=r("td"),oe=r("input"),Ke=_(),Me=r("td"),ae=r("input"),Qe=_(),Be=r("td"),re=r("input"),We=_(),ke=r("td"),he(Q.$$.fragment),je=_(),ce=r("ul");for(let e=0;e<v.length;e+=1)v[e].c();qe=_(),he(W.$$.fragment),ze=_(),J=r("div"),he(X.$$.fragment),Xe=_(),Pe=r("span"),Ze=V("Página actual: "),Ge=V(n[3]),xe=_(),he(Z.$$.fragment),Oe=_(),he(le.$$.fragment),this.h()},l(e){o=l(e,"DIV",{});var s=E(o);t=l(s,"H2",{"data-svelte-h":!0}),st(t)!=="svelte-10oc9be"&&(t.textContent=f),y=m(s),p=l(s,"INPUT",{placeholder:!0,class:!0}),$=m(s),D=l(s,"INPUT",{placeholder:!0,class:!0}),k=m(s),i=l(s,"INPUT",{placeholder:!0,class:!0}),d=m(s),g=l(s,"INPUT",{placeholder:!0,class:!0}),L=m(s),T=l(s,"INPUT",{placeholder:!0,class:!0}),I=m(s),w=l(s,"INPUT",{placeholder:!0,class:!0}),ee=m(s),z=l(s,"INPUT",{placeholder:!0,class:!0}),we=m(s),G=l(s,"INPUT",{placeholder:!0,class:!0}),s.forEach(u),ge=m(e),_e(O.$$.fragment,e),ve=m(e),C=l(e,"TABLE",{});var M=E(C);te=l(M,"THEAD",{"data-svelte-h":!0}),st(te)!=="svelte-yas1z9"&&(te.innerHTML=He),$e=m(M),ue=l(M,"TBODY",{});var Le=E(ue);A=l(Le,"TR",{});var R=E(A);ie=l(R,"TD",{});var Ae=E(ie);F=l(Ae,"INPUT",{class:!0}),Ae.forEach(u),De=m(R),pe=l(R,"TD",{});var Se=E(pe);j=l(Se,"INPUT",{class:!0}),Se.forEach(u),P=m(R),b=l(R,"TD",{});var be=E(b);q=l(be,"INPUT",{class:!0}),be.forEach(u),Ve=m(R),Ie=l(R,"TD",{});var N=E(Ie);ne=l(N,"INPUT",{class:!0}),N.forEach(u),R.forEach(u),Le.forEach(u),Ye=m(M),Te=l(M,"THEAD",{"data-svelte-h":!0}),st(Te)!=="svelte-1w7yoi0"&&(Te.innerHTML=at),Fe=m(M),S=l(M,"TBODY",{});var H=E(S);Ne=l(H,"TD",{});var lt=E(Ne);se=l(lt,"INPUT",{class:!0}),lt.forEach(u),Je=m(H),Ue=l(H,"TD",{});var ut=E(Ue);oe=l(ut,"INPUT",{class:!0}),ut.forEach(u),Ke=m(H),Me=l(H,"TD",{});var it=E(Me);ae=l(it,"INPUT",{class:!0}),it.forEach(u),Qe=m(H),Be=l(H,"TD",{});var pt=E(Be);re=l(pt,"INPUT",{class:!0}),pt.forEach(u),We=m(H),ke=l(H,"TD",{});var ct=E(ke);_e(Q.$$.fragment,ct),ct.forEach(u),H.forEach(u),M.forEach(u),je=m(e),ce=l(e,"UL",{});var ft=E(ce);for(let nt=0;nt<v.length;nt+=1)v[nt].l(ft);ft.forEach(u),qe=m(e),_e(W.$$.fragment,e),ze=m(e),J=l(e,"DIV",{});var Ee=E(J);_e(X.$$.fragment,Ee),Xe=m(Ee),Pe=l(Ee,"SPAN",{});var tt=E(Pe);Ze=Y(tt,"Página actual: "),Ge=Y(tt,n[3]),tt.forEach(u),xe=m(Ee),_e(Z.$$.fragment,Ee),Ee.forEach(u),Oe=m(e),_e(le.$$.fragment,e),this.h()},h(){h(p,"placeholder","Nombre"),h(p,"class","svelte-1316pci"),h(D,"placeholder","Breve descripcion"),h(D,"class","svelte-1316pci"),h(i,"placeholder","Género"),h(i,"class","svelte-1316pci"),h(g,"placeholder","País"),h(g,"class","svelte-1316pci"),h(T,"placeholder","Profesión"),h(T,"class","svelte-1316pci"),h(w,"placeholder","Año de nacimiento"),h(w,"class","svelte-1316pci"),h(z,"placeholder","Año de fallecimiento"),h(z,"class","svelte-1316pci"),h(G,"placeholder","Edad de muerte"),h(G,"class","svelte-1316pci"),h(F,"class","svelte-1316pci"),h(j,"class","svelte-1316pci"),ht(j,"width",n[5].short_description.length*8+"px"),h(q,"class","svelte-1316pci"),h(ne,"class","svelte-1316pci"),h(se,"class","svelte-1316pci"),h(oe,"class","svelte-1316pci"),h(ae,"class","svelte-1316pci"),h(re,"class","svelte-1316pci")},m(e,s){U(e,o,s),a(o,t),a(o,y),a(o,p),c(p,n[4].name),a(o,$),a(o,D),c(D,n[4].short_description),a(o,k),a(o,i),c(i,n[4].gender),a(o,d),a(o,g),c(g,n[4].country),a(o,L),a(o,T),c(T,n[4].occupation),a(o,I),a(o,w),c(w,n[4].birth_year),a(o,ee),a(o,z),c(z,n[4].death_year),a(o,we),a(o,G),c(G,n[4].age_of_death),U(e,ge,s),me(O,e,s),U(e,ve,s),U(e,C,s),a(C,te),a(C,$e),a(C,ue),a(ue,A),a(A,ie),a(ie,F),c(F,n[5].name),a(A,De),a(A,pe),a(pe,j),c(j,n[5].short_description),a(A,P),a(A,b),a(b,q),c(q,n[5].gender),a(A,Ve),a(A,Ie),a(Ie,ne),c(ne,n[5].country),a(C,Ye),a(C,Te),a(C,Fe),a(C,S),a(S,Ne),a(Ne,se),c(se,n[5].occupation),a(S,Je),a(S,Ue),a(Ue,oe),c(oe,n[5].birth_year),a(S,Ke),a(S,Me),a(Me,ae),c(ae,n[5].death_year),a(S,Qe),a(S,Be),a(Be,re),c(re,n[5].age_of_death),a(S,We),a(S,ke),me(Q,ke,null),U(e,je,s),U(e,ce,s);for(let M=0;M<v.length;M+=1)v[M]&&v[M].m(ce,null);U(e,qe,s),me(W,e,s),U(e,ze,s),U(e,J,s),me(X,J,null),a(J,Xe),a(J,Pe),a(Pe,Ze),a(Pe,Ge),a(J,xe),me(Z,J,null),U(e,Oe,s),me(le,e,s),Ce=!0,et||(rt=[B(p,"input",n[13]),B(D,"input",n[14]),B(i,"input",n[15]),B(g,"input",n[16]),B(T,"input",n[17]),B(w,"input",n[18]),B(z,"input",n[19]),B(G,"input",n[20]),B(F,"input",n[21]),B(j,"input",n[22]),B(q,"input",n[23]),B(ne,"input",n[24]),B(se,"input",n[25]),B(oe,"input",n[26]),B(ae,"input",n[27]),B(re,"input",n[28])],et=!0)},p(e,s){s[0]&16&&p.value!==e[4].name&&c(p,e[4].name),s[0]&16&&D.value!==e[4].short_description&&c(D,e[4].short_description),s[0]&16&&i.value!==e[4].gender&&c(i,e[4].gender),s[0]&16&&g.value!==e[4].country&&c(g,e[4].country),s[0]&16&&T.value!==e[4].occupation&&c(T,e[4].occupation),s[0]&16&&w.value!==e[4].birth_year&&c(w,e[4].birth_year),s[0]&16&&z.value!==e[4].death_year&&c(z,e[4].death_year),s[0]&16&&G.value!==e[4].age_of_death&&c(G,e[4].age_of_death);const M={};s[1]&8&&(M.$$scope={dirty:s,ctx:e}),O.$set(M),s[0]&32&&F.value!==e[5].name&&c(F,e[5].name),s[0]&32&&j.value!==e[5].short_description&&c(j,e[5].short_description),s[0]&32&&ht(j,"width",e[5].short_description.length*8+"px"),s[0]&32&&q.value!==e[5].gender&&c(q,e[5].gender),s[0]&32&&ne.value!==e[5].country&&c(ne,e[5].country),s[0]&32&&se.value!==e[5].occupation&&c(se,e[5].occupation),s[0]&32&&oe.value!==e[5].birth_year&&c(oe,e[5].birth_year),s[0]&32&&ae.value!==e[5].death_year&&c(ae,e[5].death_year),s[0]&32&&re.value!==e[5].age_of_death&&c(re,e[5].age_of_death);const Le={};if(s[1]&8&&(Le.$$scope={dirty:s,ctx:e}),Q.$set(Le),s[0]&65){fe=_t(e[0]);let N;for(N=0;N<fe.length;N+=1){const H=mt(e,fe,N);v[N]?(v[N].p(H,s),K(v[N],1)):(v[N]=dt(H),v[N].c(),K(v[N],1),v[N].m(ce,null))}for(Dt(),N=fe.length;N<v.length;N+=1)gt(N);wt()}const R={};s[1]&8&&(R.$$scope={dirty:s,ctx:e}),W.$set(R);const Ae={};s[1]&8&&(Ae.$$scope={dirty:s,ctx:e}),X.$set(Ae),(!Ce||s[0]&8)&&ot(Ge,e[3]);const Se={};s[1]&8&&(Se.$$scope={dirty:s,ctx:e}),Z.$set(Se);const be={};s[0]&4&&(be.Msg=e[2]),s[0]&2&&(be.errorMsg=e[1]),le.$set(be)},i(e){if(!Ce){K(O.$$.fragment,e),K(Q.$$.fragment,e);for(let s=0;s<fe.length;s+=1)K(v[s]);K(W.$$.fragment,e),K(X.$$.fragment,e),K(Z.$$.fragment,e),K(le.$$.fragment,e),Ce=!0}},o(e){x(O.$$.fragment,e),x(Q.$$.fragment,e),v=v.filter(Boolean);for(let s=0;s<v.length;s+=1)x(v[s]);x(W.$$.fragment,e),x(X.$$.fragment,e),x(Z.$$.fragment,e),x(le.$$.fragment,e),Ce=!1},d(e){e&&(u(o),u(ge),u(ve),u(C),u(je),u(ce),u(qe),u(ze),u(J),u(Oe)),de(O,e),de(Q),$t(v,e),de(W,e),de(X),de(Z),de(le,e),et=!1,Tt(rt)}}}const Re=10;function At(n,o,t){let f="/api/v2/famous-people",y=[],p="",$="",D=1,k=0,i={name:"",short_description:"",gender:"",country:"",occupation:"",birth_year:null,death_year:null,age_of_death:null};const d={name:"Mariano Rajoy",short_description:" president of Spain",gender:"Male",country:"Spain",occupation:"Politician",birth_year:1950,death_year:2039,age_of_death:89};Pt(()=>{g()});async function g(){try{let P=await fetch(`${f}/?offset=${k}&limit=${Re}`,{method:"GET"}),b=await P.json();t(0,y=b),P.status===200||(y.length===0?(t(2,$="La lista esta vacía"),setTimeout(()=>{t(2,$="")},3e3)):P.status===400?(t(1,p="Formato incorrecto"),setTimeout(()=>{t(1,p="")},3e3)):(t(1,p="Error cargando personas"),setTimeout(()=>{t(1,p="")},3e3)))}catch(P){t(1,p=P)}}async function L(P){try{let b=await fetch(f+"/"+P,{method:"DELETE"});console.log(`Deleting person with name ${P}`),b.status===200?(t(2,$="Persona borrada con éxito"),t(0,y=y.filter(q=>q.name!==P)),setTimeout(()=>{t(2,$="")},3e3)):(t(1,p="Esa persona no existe"),setTimeout(()=>{t(1,p="")},3e3))}catch(b){t(1,p=b)}}async function T(){try{(await fetch(f,{method:"DELETE"})).status==200?(t(2,$="Personas borradas con éxito"),t(0,y=[]),setTimeout(()=>{t(2,$="")},3e3)):(t(1,p="Ya están todas las personas borradas"),setTimeout(()=>{t(1,p="")},3e3))}catch(P){t(1,p=P)}}async function I(){try{let b=await(await fetch(f,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(d)})).status;console.log(`Creation response status ${b}`),b===201?(g(),t(2,$="Persona creada con éxito"),setTimeout(()=>{t(2,$="")},3e3)):(t(1,p="La persona ya existe"),setTimeout(()=>{t(1,p="")},3e3))}catch(P){t(1,p=P)}}async function w(){const P=new URLSearchParams;for(const b in i)i[b]&&P.append(b,i[b]);try{const b=await fetch(`${f}/?${P}`,{method:"GET"}),q=await b.json();b.status===200?(t(0,y=q),t(1,p="")):t(1,p="Error al realizar la búsqueda")}catch{t(1,p="Error del servidor al realizar la búsqueda")}}async function ee(){t(0,y.length=Re,y)&&(k+=Re,t(3,D+=1),await g())}async function z(){k=Math.max(0,k-Re),t(3,D=Math.max(1,D-1)),await g()}function we(){i.name=this.value,t(4,i)}function G(){i.short_description=this.value,t(4,i)}function ge(){i.gender=this.value,t(4,i)}function O(){i.country=this.value,t(4,i)}function ve(){i.occupation=this.value,t(4,i)}function C(){i.birth_year=this.value,t(4,i)}function te(){i.death_year=this.value,t(4,i)}function He(){i.age_of_death=this.value,t(4,i)}function $e(){d.name=this.value,t(5,d)}function ue(){d.short_description=this.value,t(5,d)}function A(){d.gender=this.value,t(5,d)}function ie(){d.country=this.value,t(5,d)}function F(){d.occupation=this.value,t(5,d)}function De(){d.birth_year=this.value,t(5,d)}function pe(){d.death_year=this.value,t(5,d)}function j(){d.age_of_death=this.value,t(5,d)}return[y,p,$,D,i,d,L,T,I,w,ee,z,g,we,G,ge,O,ve,C,te,He,$e,ue,A,ie,F,De,pe,j]}class Ot extends Et{constructor(o){super(),yt(this,o,At,Lt,vt,{getPeople:12},null,[-1,-1])}get getPeople(){return this.$$.ctx[12]}}export{Ot as component};
