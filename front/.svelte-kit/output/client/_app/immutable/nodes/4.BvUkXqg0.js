import{s as Tt,r as bt,o as Pt,i as yt}from"../chunks/scheduler.wWR6jiGY.js";import{S as Et,i as $t,e as r,h as _,j as he,t as V,b as l,f as y,k as at,l as m,d as u,m as _e,c as Y,n as h,A as _t,a as U,g as o,o as c,p as me,q as B,r as $e,u as K,v as wt,s as ot,w as ne,x as de,y as Dt,z as It}from"../chunks/index.j2r2S6jy.js";import{e as mt}from"../chunks/each.D6YF6ztN.js";import{B as Ee}from"../chunks/MessageContainer.svelte_svelte_type_style_lang.eMTc9cxz.js";import"../chunks/Theme.svelte_svelte_type_style_lang.C8eeSRjy.js";import{M as Nt}from"../chunks/MessageContainer.CMkKOei7.js";function dt(n,a,t){const f=n.slice();return f[31]=a[t],f}function Ut(n){let a;return{c(){a=V("Buscar")},l(t){a=Y(t,"Buscar")},m(t,f){U(t,a,f)},d(t){t&&u(a)}}}function Mt(n){let a;return{c(){a=V("Crear")},l(t){a=Y(t,"Crear")},m(t,f){U(t,a,f)},d(t){t&&u(a)}}}function Bt(n){let a;return{c(){a=V("Borrar")},l(t){a=Y(t,"Borrar")},m(t,f){U(t,a,f)},d(t){t&&u(a)}}}function gt(n){let a,t,f,$=n[31].name+"",p,w,D,k=n[31].gender+"",i,d,g,C;return g=new Ee({props:{class:"delete-button",color:"danger",$$slots:{default:[Bt]},$$scope:{ctx:n}}}),g.$on("click",function(){yt(n[6](n[31].name))&&n[6](n[31].name).apply(this,arguments)}),{c(){a=r("div"),t=r("li"),f=r("a"),p=V($),D=V("- "),i=V(k),d=_(),he(g.$$.fragment),this.h()},l(T){a=l(T,"DIV",{class:!0});var I=y(a);t=l(I,"LI",{class:!0});var E=y(t);f=l(E,"A",{href:!0});var se=y(f);p=Y(se,$),se.forEach(u),D=Y(E,"- "),i=Y(E,k),E.forEach(u),d=m(I),_e(g.$$.fragment,I),I.forEach(u),this.h()},h(){h(f,"href",w="/famous-people/"+n[31].name+"/"+n[31].country),h(t,"class","svelte-1316pci"),h(a,"class","person-container svelte-1316pci")},m(T,I){U(T,a,I),o(a,t),o(t,f),o(f,p),o(t,D),o(t,i),o(a,d),me(g,a,null),C=!0},p(T,I){n=T,(!C||I[0]&1)&&$!==($=n[31].name+"")&&ot(p,$),(!C||I[0]&1&&w!==(w="/famous-people/"+n[31].name+"/"+n[31].country))&&h(f,"href",w),(!C||I[0]&1)&&k!==(k=n[31].gender+"")&&ot(i,k);const E={};I[1]&8&&(E.$$scope={dirty:I,ctx:n}),g.$set(E)},i(T){C||(K(g.$$.fragment,T),C=!0)},o(T){ne(g.$$.fragment,T),C=!1},d(T){T&&u(a),de(g)}}}function kt(n){let a;return{c(){a=V("Borrar todo")},l(t){a=Y(t,"Borrar todo")},m(t,f){U(t,a,f)},d(t){t&&u(a)}}}function At(n){let a;return{c(){a=V("Página anterior")},l(t){a=Y(t,"Página anterior")},m(t,f){U(t,a,f)},d(t){t&&u(a)}}}function Ct(n){let a;return{c(){a=V("Página siguiente")},l(t){a=Y(t,"Página siguiente")},m(t,f){U(t,a,f)},d(t){t&&u(a)}}}function Lt(n){let a,t,f="Buscar por campos",$,p,w,D,k,i,d,g,C,T,I,E,se,z,we,G,ge,O,ve,A,ae,je="<tr><th>Nombre</th> <th>Breve descripción</th> <th>Género</th> <th>País</th></tr>",De,ue,L,ie,F,Ie,pe,j,b,P,q,Ye,Ne,oe,Fe,Te,rt="<tr><th>Profesión</th> <th>Año de nacimiento</th> <th>Año de fallecimiento</th> <th>Edad de muerte</th></tr>",Je,S,Ue,re,Ke,Me,Q,Qe,Be,W,We,ke,X,Xe,Ae,Z,qe,ce,ze,x,Ge,J,ee,Ze,be,xe,Oe,et,te,Re,le,Ce,tt,lt;O=new Ee({props:{color:"primary",$$slots:{default:[Ut]},$$scope:{ctx:n}}}),O.$on("click",n[9]),Z=new Ee({props:{color:"primary",$$slots:{default:[Mt]},$$scope:{ctx:n}}}),Z.$on("click",n[8]);let fe=mt(n[0]),v=[];for(let e=0;e<fe.length;e+=1)v[e]=gt(dt(n,fe,e));const vt=e=>ne(v[e],1,1,()=>{v[e]=null});return x=new Ee({props:{color:"danger",$$slots:{default:[kt]},$$scope:{ctx:n}}}),x.$on("click",n[7]),ee=new Ee({props:{color:"primary",$$slots:{default:[At]},$$scope:{ctx:n}}}),ee.$on("click",n[11]),te=new Ee({props:{color:"primary",$$slots:{default:[Ct]},$$scope:{ctx:n}}}),te.$on("click",n[10]),le=new Nt({props:{Msg:n[2],errorMsg:n[1]}}),{c(){a=r("div"),t=r("h2"),t.textContent=f,$=_(),p=r("input"),w=_(),D=r("input"),k=_(),i=r("input"),d=_(),g=r("input"),C=_(),T=r("input"),I=_(),E=r("input"),se=_(),z=r("input"),we=_(),G=r("input"),ge=_(),he(O.$$.fragment),ve=_(),A=r("table"),ae=r("thead"),ae.innerHTML=je,De=_(),ue=r("tbody"),L=r("tr"),ie=r("td"),F=r("input"),Ie=_(),pe=r("td"),j=r("input"),b=_(),P=r("td"),q=r("input"),Ye=_(),Ne=r("td"),oe=r("input"),Fe=_(),Te=r("thead"),Te.innerHTML=rt,Je=_(),S=r("tbody"),Ue=r("td"),re=r("input"),Ke=_(),Me=r("td"),Q=r("input"),Qe=_(),Be=r("td"),W=r("input"),We=_(),ke=r("td"),X=r("input"),Xe=_(),Ae=r("td"),he(Z.$$.fragment),qe=_(),ce=r("ul");for(let e=0;e<v.length;e+=1)v[e].c();ze=_(),he(x.$$.fragment),Ge=_(),J=r("div"),he(ee.$$.fragment),Ze=_(),be=r("span"),xe=V("Página actual: "),Oe=V(n[3]),et=_(),he(te.$$.fragment),Re=_(),he(le.$$.fragment),this.h()},l(e){a=l(e,"DIV",{});var s=y(a);t=l(s,"H2",{"data-svelte-h":!0}),at(t)!=="svelte-10oc9be"&&(t.textContent=f),$=m(s),p=l(s,"INPUT",{placeholder:!0,class:!0}),w=m(s),D=l(s,"INPUT",{placeholder:!0,class:!0}),k=m(s),i=l(s,"INPUT",{placeholder:!0,class:!0}),d=m(s),g=l(s,"INPUT",{placeholder:!0,class:!0}),C=m(s),T=l(s,"INPUT",{placeholder:!0,class:!0}),I=m(s),E=l(s,"INPUT",{placeholder:!0,class:!0}),se=m(s),z=l(s,"INPUT",{placeholder:!0,class:!0}),we=m(s),G=l(s,"INPUT",{placeholder:!0,class:!0}),s.forEach(u),ge=m(e),_e(O.$$.fragment,e),ve=m(e),A=l(e,"TABLE",{});var M=y(A);ae=l(M,"THEAD",{"data-svelte-h":!0}),at(ae)!=="svelte-yas1z9"&&(ae.innerHTML=je),De=m(M),ue=l(M,"TBODY",{});var Le=y(ue);L=l(Le,"TR",{});var R=y(L);ie=l(R,"TD",{});var Se=y(ie);F=l(Se,"INPUT",{class:!0}),Se.forEach(u),Ie=m(R),pe=l(R,"TD",{});var He=y(pe);j=l(He,"INPUT",{class:!0}),He.forEach(u),b=m(R),P=l(R,"TD",{});var Pe=y(P);q=l(Pe,"INPUT",{class:!0}),Pe.forEach(u),Ye=m(R),Ne=l(R,"TD",{});var N=y(Ne);oe=l(N,"INPUT",{class:!0}),N.forEach(u),R.forEach(u),Le.forEach(u),Fe=m(M),Te=l(M,"THEAD",{"data-svelte-h":!0}),at(Te)!=="svelte-1w7yoi0"&&(Te.innerHTML=rt),Je=m(M),S=l(M,"TBODY",{});var H=y(S);Ue=l(H,"TD",{});var ut=y(Ue);re=l(ut,"INPUT",{class:!0}),ut.forEach(u),Ke=m(H),Me=l(H,"TD",{});var it=y(Me);Q=l(it,"INPUT",{type:!0,class:!0}),it.forEach(u),Qe=m(H),Be=l(H,"TD",{});var pt=y(Be);W=l(pt,"INPUT",{type:!0,class:!0}),pt.forEach(u),We=m(H),ke=l(H,"TD",{});var ct=y(ke);X=l(ct,"INPUT",{type:!0,class:!0}),ct.forEach(u),Xe=m(H),Ae=l(H,"TD",{});var ft=y(Ae);_e(Z.$$.fragment,ft),ft.forEach(u),H.forEach(u),M.forEach(u),qe=m(e),ce=l(e,"UL",{});var ht=y(ce);for(let st=0;st<v.length;st+=1)v[st].l(ht);ht.forEach(u),ze=m(e),_e(x.$$.fragment,e),Ge=m(e),J=l(e,"DIV",{});var ye=y(J);_e(ee.$$.fragment,ye),Ze=m(ye),be=l(ye,"SPAN",{});var nt=y(be);xe=Y(nt,"Página actual: "),Oe=Y(nt,n[3]),nt.forEach(u),et=m(ye),_e(te.$$.fragment,ye),ye.forEach(u),Re=m(e),_e(le.$$.fragment,e),this.h()},h(){h(p,"placeholder","Nombre"),h(p,"class","svelte-1316pci"),h(D,"placeholder","Breve descripcion"),h(D,"class","svelte-1316pci"),h(i,"placeholder","Género"),h(i,"class","svelte-1316pci"),h(g,"placeholder","País"),h(g,"class","svelte-1316pci"),h(T,"placeholder","Profesión"),h(T,"class","svelte-1316pci"),h(E,"placeholder","Año de nacimiento"),h(E,"class","svelte-1316pci"),h(z,"placeholder","Año de fallecimiento"),h(z,"class","svelte-1316pci"),h(G,"placeholder","Edad de muerte"),h(G,"class","svelte-1316pci"),h(F,"class","svelte-1316pci"),h(j,"class","svelte-1316pci"),_t(j,"width",n[5].short_description.length*8+"px"),h(q,"class","svelte-1316pci"),h(oe,"class","svelte-1316pci"),h(re,"class","svelte-1316pci"),h(Q,"type","number"),h(Q,"class","svelte-1316pci"),h(W,"type","number"),h(W,"class","svelte-1316pci"),h(X,"type","number"),h(X,"class","svelte-1316pci")},m(e,s){U(e,a,s),o(a,t),o(a,$),o(a,p),c(p,n[4].name),o(a,w),o(a,D),c(D,n[4].short_description),o(a,k),o(a,i),c(i,n[4].gender),o(a,d),o(a,g),c(g,n[4].country),o(a,C),o(a,T),c(T,n[4].occupation),o(a,I),o(a,E),c(E,n[4].birth_year),o(a,se),o(a,z),c(z,n[4].death_year),o(a,we),o(a,G),c(G,n[4].age_of_death),U(e,ge,s),me(O,e,s),U(e,ve,s),U(e,A,s),o(A,ae),o(A,De),o(A,ue),o(ue,L),o(L,ie),o(ie,F),c(F,n[5].name),o(L,Ie),o(L,pe),o(pe,j),c(j,n[5].short_description),o(L,b),o(L,P),o(P,q),c(q,n[5].gender),o(L,Ye),o(L,Ne),o(Ne,oe),c(oe,n[5].country),o(A,Fe),o(A,Te),o(A,Je),o(A,S),o(S,Ue),o(Ue,re),c(re,n[5].occupation),o(S,Ke),o(S,Me),o(Me,Q),c(Q,n[5].birth_year),o(S,Qe),o(S,Be),o(Be,W),c(W,n[5].death_year),o(S,We),o(S,ke),o(ke,X),c(X,n[5].age_of_death),o(S,Xe),o(S,Ae),me(Z,Ae,null),U(e,qe,s),U(e,ce,s);for(let M=0;M<v.length;M+=1)v[M]&&v[M].m(ce,null);U(e,ze,s),me(x,e,s),U(e,Ge,s),U(e,J,s),me(ee,J,null),o(J,Ze),o(J,be),o(be,xe),o(be,Oe),o(J,et),me(te,J,null),U(e,Re,s),me(le,e,s),Ce=!0,tt||(lt=[B(p,"input",n[13]),B(D,"input",n[14]),B(i,"input",n[15]),B(g,"input",n[16]),B(T,"input",n[17]),B(E,"input",n[18]),B(z,"input",n[19]),B(G,"input",n[20]),B(F,"input",n[21]),B(j,"input",n[22]),B(q,"input",n[23]),B(oe,"input",n[24]),B(re,"input",n[25]),B(Q,"input",n[26]),B(W,"input",n[27]),B(X,"input",n[28])],tt=!0)},p(e,s){s[0]&16&&p.value!==e[4].name&&c(p,e[4].name),s[0]&16&&D.value!==e[4].short_description&&c(D,e[4].short_description),s[0]&16&&i.value!==e[4].gender&&c(i,e[4].gender),s[0]&16&&g.value!==e[4].country&&c(g,e[4].country),s[0]&16&&T.value!==e[4].occupation&&c(T,e[4].occupation),s[0]&16&&E.value!==e[4].birth_year&&c(E,e[4].birth_year),s[0]&16&&z.value!==e[4].death_year&&c(z,e[4].death_year),s[0]&16&&G.value!==e[4].age_of_death&&c(G,e[4].age_of_death);const M={};s[1]&8&&(M.$$scope={dirty:s,ctx:e}),O.$set(M),s[0]&32&&F.value!==e[5].name&&c(F,e[5].name),s[0]&32&&j.value!==e[5].short_description&&c(j,e[5].short_description),s[0]&32&&_t(j,"width",e[5].short_description.length*8+"px"),s[0]&32&&q.value!==e[5].gender&&c(q,e[5].gender),s[0]&32&&oe.value!==e[5].country&&c(oe,e[5].country),s[0]&32&&re.value!==e[5].occupation&&c(re,e[5].occupation),s[0]&32&&$e(Q.value)!==e[5].birth_year&&c(Q,e[5].birth_year),s[0]&32&&$e(W.value)!==e[5].death_year&&c(W,e[5].death_year),s[0]&32&&$e(X.value)!==e[5].age_of_death&&c(X,e[5].age_of_death);const Le={};if(s[1]&8&&(Le.$$scope={dirty:s,ctx:e}),Z.$set(Le),s[0]&65){fe=mt(e[0]);let N;for(N=0;N<fe.length;N+=1){const H=dt(e,fe,N);v[N]?(v[N].p(H,s),K(v[N],1)):(v[N]=gt(H),v[N].c(),K(v[N],1),v[N].m(ce,null))}for(It(),N=fe.length;N<v.length;N+=1)vt(N);wt()}const R={};s[1]&8&&(R.$$scope={dirty:s,ctx:e}),x.$set(R);const Se={};s[1]&8&&(Se.$$scope={dirty:s,ctx:e}),ee.$set(Se),(!Ce||s[0]&8)&&ot(Oe,e[3]);const He={};s[1]&8&&(He.$$scope={dirty:s,ctx:e}),te.$set(He);const Pe={};s[0]&4&&(Pe.Msg=e[2]),s[0]&2&&(Pe.errorMsg=e[1]),le.$set(Pe)},i(e){if(!Ce){K(O.$$.fragment,e),K(Z.$$.fragment,e);for(let s=0;s<fe.length;s+=1)K(v[s]);K(x.$$.fragment,e),K(ee.$$.fragment,e),K(te.$$.fragment,e),K(le.$$.fragment,e),Ce=!0}},o(e){ne(O.$$.fragment,e),ne(Z.$$.fragment,e),v=v.filter(Boolean);for(let s=0;s<v.length;s+=1)ne(v[s]);ne(x.$$.fragment,e),ne(ee.$$.fragment,e),ne(te.$$.fragment,e),ne(le.$$.fragment,e),Ce=!1},d(e){e&&(u(a),u(ge),u(ve),u(A),u(qe),u(ce),u(ze),u(Ge),u(J),u(Re)),de(O,e),de(Z),Dt(v,e),de(x,e),de(ee),de(te),de(le,e),tt=!1,bt(lt)}}}const Ve=10;function St(n,a,t){let f="/api/v2/famous-people",$=[],p="",w="",D=1,k=0,i={name:"",short_description:"",gender:"",country:"",occupation:"",birth_year:null,death_year:null,age_of_death:null};const d={name:"Mariano Rajoy",short_description:" president of Spain",gender:"Male",country:"Spain",occupation:"Politician",birth_year:1950,death_year:2039,age_of_death:89};Pt(()=>{g()});async function g(){try{let b=await fetch(`${f}/?offset=${k}&limit=${Ve}`,{method:"GET"}),P=await b.json();t(0,$=P),b.status===200||($.length===0?(t(2,w="La lista esta vacía"),setTimeout(()=>{t(2,w="")},3e3)):b.status===400?(t(1,p="Formato incorrecto"),setTimeout(()=>{t(1,p="")},3e3)):(t(1,p="Error cargando personas"),setTimeout(()=>{t(1,p="")},3e3)))}catch(b){t(1,p=b)}}async function C(b){try{let P=await fetch(f+"/"+b,{method:"DELETE"});console.log(`Deleting person with name ${b}`),P.status===200?(t(2,w="Persona borrada con éxito"),t(0,$=$.filter(q=>q.name!==b)),setTimeout(()=>{t(2,w="")},3e3)):(t(1,p="Esa persona no existe"),setTimeout(()=>{t(1,p="")},3e3))}catch(P){t(1,p=P)}}async function T(){try{(await fetch(f,{method:"DELETE"})).status==200?(t(2,w="Personas borradas con éxito"),t(0,$=[]),setTimeout(()=>{t(2,w="")},3e3)):(t(1,p="Ya están todas las personas borradas"),setTimeout(()=>{t(1,p="")},3e3))}catch(b){t(1,p=b)}}async function I(){try{let P=await(await fetch(f,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(d)})).status;console.log(`Creation response status ${P}`),P===201?(g(),t(2,w="Persona creada con éxito"),setTimeout(()=>{t(2,w="")},3e3)):(t(1,p="La persona ya existe"),setTimeout(()=>{t(1,p="")},3e3))}catch(b){t(1,p=b)}}async function E(){const b=new URLSearchParams;for(const P in i)i[P]&&b.append(P,i[P]);try{const P=await fetch(`${f}/?${b}`,{method:"GET"}),q=await P.json();P.status===200?(t(0,$=q),t(1,p="")):t(1,p="Error al realizar la búsqueda")}catch{t(1,p="Error del servidor al realizar la búsqueda")}}async function se(){$.length===Ve&&(k+=Ve,t(3,D+=1),await g())}async function z(){k=Math.max(0,k-Ve),t(3,D=Math.max(1,D-1)),await g()}function we(){i.name=this.value,t(4,i)}function G(){i.short_description=this.value,t(4,i)}function ge(){i.gender=this.value,t(4,i)}function O(){i.country=this.value,t(4,i)}function ve(){i.occupation=this.value,t(4,i)}function A(){i.birth_year=this.value,t(4,i)}function ae(){i.death_year=this.value,t(4,i)}function je(){i.age_of_death=this.value,t(4,i)}function De(){d.name=this.value,t(5,d)}function ue(){d.short_description=this.value,t(5,d)}function L(){d.gender=this.value,t(5,d)}function ie(){d.country=this.value,t(5,d)}function F(){d.occupation=this.value,t(5,d)}function Ie(){d.birth_year=$e(this.value),t(5,d)}function pe(){d.death_year=$e(this.value),t(5,d)}function j(){d.age_of_death=$e(this.value),t(5,d)}return[$,p,w,D,i,d,C,T,I,E,se,z,g,we,G,ge,O,ve,A,ae,je,De,ue,L,ie,F,Ie,pe,j]}class Rt extends Et{constructor(a){super(),$t(this,a,St,Lt,Tt,{getPeople:12},null,[-1,-1])}get getPeople(){return this.$$.ctx[12]}}export{Rt as component};
