import{s as Pe,c as Me,o as Ne,r as ke,n as be}from"../chunks/scheduler.wWR6jiGY.js";import{S as we,i as Ae,h as P,j as ge,l as M,m as ye,a as j,p as Te,u as W,w as x,v as Ie,d,x as Ee,e as u,b as _,f as T,k as se,n as B,A as me,g as o,o as b,q as L,t as oe,c as re,z as Ue}from"../chunks/index.j2r2S6jy.js";import{p as Ce}from"../chunks/stores.EywBeHnw.js";import{B as He}from"../chunks/MessageContainer.svelte_svelte_type_style_lang.eMTc9cxz.js";import"../chunks/Theme.svelte_svelte_type_style_lang.C8eeSRjy.js";import{M as ze}from"../chunks/MessageContainer.CMkKOei7.js";function Be(r){let n,t="Esta persona no existe.";return{c(){n=u("p"),n.textContent=t},l(c){n=_(c,"P",{"data-svelte-h":!0}),se(n)!=="svelte-1m4dz9i"&&(n.textContent=t)},m(c,f){j(c,n,f)},p:be,d(c){c&&d(n)}}}function Le(r){let n,t,c=r[3].name+"",f,m,l;return{c(){n=u("h2"),t=oe("Detalles de "),f=oe(c),m=P(),l=u("hr")},l(a){n=_(a,"H2",{});var e=T(n);t=re(e,"Detalles de "),f=re(e,c),e.forEach(d),m=M(a),l=_(a,"HR",{})},m(a,e){j(a,n,e),o(n,t),o(n,f),j(a,m,e),j(a,l,e)},p:be,d(a){a&&(d(n),d(m),d(l))}}}function ve(r){let n,t,c="<tr><th>Nombre</th> <th>Breve descripción</th> <th>Género</th> <th>País</th></tr>",f,m,l,a,e,s,h,v,Y,O,N,J,S,k,D,E,g="<tr><th>Profesión</th> <th>Año de nacimiento</th> <th>Año de fallecimiento</th> <th>Edad de muerte</th></tr>",q,y,G,A,X,R,I,Z,F,C,ee,K,H,te,Q,U,$,ne,ae;return U=new He({props:{color:"primary",$$slots:{default:[je]},$$scope:{ctx:r}}}),U.$on("click",r[4]),{c(){n=u("table"),t=u("thead"),t.innerHTML=c,f=P(),m=u("tbody"),l=u("tr"),a=u("td"),e=u("input"),s=P(),h=u("td"),v=u("input"),Y=P(),O=u("td"),N=u("input"),J=P(),S=u("td"),k=u("input"),D=P(),E=u("thead"),E.innerHTML=g,q=P(),y=u("tbody"),G=u("td"),A=u("input"),X=P(),R=u("td"),I=u("input"),Z=P(),F=u("td"),C=u("input"),ee=P(),K=u("td"),H=u("input"),te=P(),Q=u("td"),ge(U.$$.fragment),this.h()},l(i){n=_(i,"TABLE",{});var p=T(n);t=_(p,"THEAD",{"data-svelte-h":!0}),se(t)!=="svelte-yas1z9"&&(t.innerHTML=c),f=M(p),m=_(p,"TBODY",{});var V=T(m);l=_(V,"TR",{});var z=T(l);a=_(z,"TD",{});var le=T(a);e=_(le,"INPUT",{class:!0}),le.forEach(d),s=M(z),h=_(z,"TD",{});var ie=T(h);v=_(ie,"INPUT",{class:!0}),ie.forEach(d),Y=M(z),O=_(z,"TD",{});var ue=T(O);N=_(ue,"INPUT",{class:!0}),ue.forEach(d),J=M(z),S=_(z,"TD",{});var _e=T(S);k=_(_e,"INPUT",{class:!0}),_e.forEach(d),z.forEach(d),V.forEach(d),D=M(p),E=_(p,"THEAD",{"data-svelte-h":!0}),se(E)!=="svelte-1w7yoi0"&&(E.innerHTML=g),q=M(p),y=_(p,"TBODY",{});var w=T(y);G=_(w,"TD",{});var ce=T(G);A=_(ce,"INPUT",{class:!0}),ce.forEach(d),X=M(w),R=_(w,"TD",{});var pe=T(R);I=_(pe,"INPUT",{class:!0}),pe.forEach(d),Z=M(w),F=_(w,"TD",{});var de=T(F);C=_(de,"INPUT",{class:!0}),de.forEach(d),ee=M(w),K=_(w,"TD",{});var he=T(K);H=_(he,"INPUT",{class:!0}),he.forEach(d),te=M(w),Q=_(w,"TD",{});var fe=T(Q);ye(U.$$.fragment,fe),fe.forEach(d),w.forEach(d),p.forEach(d),this.h()},h(){B(e,"class","svelte-1b14d9v"),B(v,"class","svelte-1b14d9v"),me(v,"width",r[2].short_description.length*8+"px"),B(N,"class","svelte-1b14d9v"),B(k,"class","svelte-1b14d9v"),B(A,"class","svelte-1b14d9v"),B(I,"class","svelte-1b14d9v"),B(C,"class","svelte-1b14d9v"),B(H,"class","svelte-1b14d9v")},m(i,p){j(i,n,p),o(n,t),o(n,f),o(n,m),o(m,l),o(l,a),o(a,e),b(e,r[2].name),o(l,s),o(l,h),o(h,v),b(v,r[2].short_description),o(l,Y),o(l,O),o(O,N),b(N,r[2].gender),o(l,J),o(l,S),o(S,k),b(k,r[2].country),o(n,D),o(n,E),o(n,q),o(n,y),o(y,G),o(G,A),b(A,r[2].occupation),o(y,X),o(y,R),o(R,I),b(I,r[2].birth_year),o(y,Z),o(y,F),o(F,C),b(C,r[2].death_year),o(y,ee),o(y,K),o(K,H),b(H,r[2].age_of_death),o(y,te),o(y,Q),Te(U,Q,null),$=!0,ne||(ae=[L(e,"input",r[5]),L(v,"input",r[6]),L(N,"input",r[7]),L(k,"input",r[8]),L(A,"input",r[9]),L(I,"input",r[10]),L(C,"input",r[11]),L(H,"input",r[12])],ne=!0)},p(i,p){p&4&&e.value!==i[2].name&&b(e,i[2].name),p&4&&v.value!==i[2].short_description&&b(v,i[2].short_description),p&4&&me(v,"width",i[2].short_description.length*8+"px"),p&4&&N.value!==i[2].gender&&b(N,i[2].gender),p&4&&k.value!==i[2].country&&b(k,i[2].country),p&4&&A.value!==i[2].occupation&&b(A,i[2].occupation),p&4&&I.value!==i[2].birth_year&&b(I,i[2].birth_year),p&4&&C.value!==i[2].death_year&&b(C,i[2].death_year),p&4&&H.value!==i[2].age_of_death&&b(H,i[2].age_of_death);const V={};p&65536&&(V.$$scope={dirty:p,ctx:i}),U.$set(V)},i(i){$||(W(U.$$.fragment,i),$=!0)},o(i){x(U.$$.fragment,i),$=!1},d(i){i&&d(n),Ee(U),ne=!1,ke(ae)}}}function je(r){let n;return{c(){n=oe("Actualizar")},l(t){n=re(t,"Actualizar")},m(t,c){j(t,n,c)},d(t){t&&d(n)}}}function Oe(r){let n,t,c,f;function m(s,h){return s[2]?Le:Be}let l=m(r),a=l(r),e=r[2]&&ve(r);return c=new ze({props:{Msg:r[1],errorMsg:r[0]}}),{c(){a.c(),n=P(),e&&e.c(),t=P(),ge(c.$$.fragment)},l(s){a.l(s),n=M(s),e&&e.l(s),t=M(s),ye(c.$$.fragment,s)},m(s,h){a.m(s,h),j(s,n,h),e&&e.m(s,h),j(s,t,h),Te(c,s,h),f=!0},p(s,[h]){l===(l=m(s))&&a?a.p(s,h):(a.d(1),a=l(s),a&&(a.c(),a.m(n.parentNode,n))),s[2]?e?(e.p(s,h),h&4&&W(e,1)):(e=ve(s),e.c(),W(e,1),e.m(t.parentNode,t)):e&&(Ue(),x(e,1,1,()=>{e=null}),Ie());const v={};h&2&&(v.Msg=s[1]),h&1&&(v.errorMsg=s[0]),c.$set(v)},i(s){f||(W(e),W(c.$$.fragment,s),f=!0)},o(s){x(e),x(c.$$.fragment,s),f=!1},d(s){s&&(d(n),d(t)),a.d(s),e&&e.d(s),Ee(c,s)}}}function Se(r,n,t){let c;Me(r,Ce,E=>t(14,c=E));let f=c.params,m="/api/v2/famous-people/"+f.name+"/"+f.country,l="",a="",e;async function s(){const E=await fetch(m,{method:"GET"}),g=await E.json();try{let q=g.name,y=g.short_description,G=g.gender,A=g.country,X=g.occupation,R=g.birth_year,I=g.death_year,Z=g.age_of_death;E.status===404&&(t(0,l="No existe la persona"),setTimeout(()=>{t(1,a="")},3e3))}catch(q){t(0,l=q)}return g}Ne(async()=>{t(2,e=await s()),console.log(e.short_description)});async function h(){const E={name:e==null?void 0:e.name,short_description:e==null?void 0:e.short_description,gender:e==null?void 0:e.gender,country:e==null?void 0:e.country,occupation:e==null?void 0:e.occupation,birth_year:e==null?void 0:e.birth_year,death_year:e==null?void 0:e.death_year,age_of_death:e==null?void 0:e.age_of_death};try{(await fetch(m,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(E)})).status==200?(t(1,a="Persona actualizada con éxito"),s(),setTimeout(()=>{t(1,a="")},3e3)):(t(0,l="Esa persona no existe"),setTimeout(()=>{t(0,l="")},3e3))}catch(g){t(0,l=g)}}function v(){e.name=this.value,t(2,e)}function Y(){e.short_description=this.value,t(2,e)}function O(){e.gender=this.value,t(2,e)}function N(){e.country=this.value,t(2,e)}function J(){e.occupation=this.value,t(2,e)}function S(){e.birth_year=this.value,t(2,e)}function k(){e.death_year=this.value,t(2,e)}function D(){e.age_of_death=this.value,t(2,e)}return[l,a,e,f,h,v,Y,O,N,J,S,k,D]}class Fe extends we{constructor(n){super(),Ae(this,n,Se,Oe,Pe,{})}}export{Fe as component};
